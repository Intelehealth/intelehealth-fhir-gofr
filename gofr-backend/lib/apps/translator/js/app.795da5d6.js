(function(){"use strict";var e={7155:function(e,t,n){n.d(t,{Y:function(){return ie}});var o=n(538),a=n(998),r=n(8271),s=n(3059),i=n(3687),c=function(){var e=this,t=e._self._c;return t(a.Z,{attrs:{id:"top"}},[t("IhrisHeader",{attrs:{app:""}}),t(s.Z,[t("center",[t("p"),t("b",[e._v("GOFR Translation APP")])]),t("router-view")],1),t(r.Z,{attrs:{dark:"",color:"primary",fixed:!1,app:"",height:"20"}},[t(i.Z),t("label",{staticStyle:{"font-size":"10px"}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.GOFR Version"))+" "+e._s(e.$store.state.version)+" ")])],1)],1)},l=[],u=n(6232),h=n(6190),d=n(4324),f=n(7953),g=function(){var e=this,t=e._self._c;return t(u.Z,{attrs:{color:"white",light:"",app:"","clipped-left":"","clipped-right":"",height:"50"}},[t("a",{attrs:{href:e.$store.state.coreURL}},[t("img",{staticStyle:{"margin-top":"11px"},attrs:{src:n(8445),width:"220"}})]),e.$store.state.auth.userID?[t(i.Z),t("label",{staticStyle:{color:"#569fd3"}},[e._v(" "+e._s(e.$store.state.auth.username)+" "),t(d.Z,[e._v("mdi-account")])],1)]:e._e(),t(i.Z),t(f.lj,[e.$keycloak&&e.$keycloak.authenticated||e.$store.state.auth.userID||e.$store.state.config.generalConfig.authDisabled?[e.dhisLink?t(h.Z,{attrs:{flat:"",href:e.dhisLink}},[t("img",{attrs:{src:n(7388)}})]):e._e()]:e._e(),t("div",[t("language-switcher")],1),e.$store.state.auth.userID?[e.$store.state.public_access?t(h.Z,{attrs:{color:"white",light:"",to:"/logout-public",small:""}},[t(d.Z,[e._v("mdi-login")]),e._v(e._s(e.$t("App.hardcoded-texts.Login"))+" ")],1):t(h.Z,{attrs:{color:"white",light:"",href:e.$store.state.coreURL+"/logout",small:""}},[t(d.Z,[e._v("mdi-logout")]),e._v(e._s(e.$t("App.hardcoded-texts.Logout"))+" ")],1)]:e._e()],2)],2)},p=[],m=n(5495),v=n(5808),y=n(4525),k=n(523),b=n(5754),w=n(4568),_=function(){var e=this,t=e._self._c;return t(w.Z,{staticClass:"ma-8",attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:o}){return[t(h.Z,e._g(e._b({staticClass:"text-capitalize",attrs:{text:""}},"v-btn",o,!1),n),[t(k.Z,{attrs:{size:"24"}},[t(m.Z,{attrs:{src:`/flag_${e.activeFlag}.svg`}})],1),e._v(" "+e._s(e.activeLang)+" "),t(d.Z,{attrs:{small:"",right:""}},[e._v("mdi-menu-down")])],1)]}}]),model:{value:e.languageMenu,callback:function(t){e.languageMenu=t},expression:"languageMenu"}},[t(v.Z,{attrs:{dense:""}},e._l(e.languages,(function(n,o){return t(y.Z,{key:o,on:{click:function(t){return e.handleMenuItemClick(n)}}},[t(k.Z,{attrs:{size:"24"}},[t(m.Z,{attrs:{src:`/flag_${n.flag}.svg`}})],1),t(b.V9,[e._v(e._s(n.language))])],1)})),1)],1)},C=[],L=n(7152),Z=n(9669),A=n.n(Z),P=n(629);o.ZP.use(P.ZP);var j=new P.ZP.Store({state:{auth:{username:"",userID:"",userObj:{},role:""},config:{},dhis:{user:{orgId:"",orgName:""},host:"",dev:{auth:{username:"",password:""}}},coreURL:""},getters:{},mutations:{},actions:{},modules:{}});o.ZP.use(L.Z);const I=new L.Z({locale:"en",fallbackLocale:"en",messages:{}});function S(e){j.state.initializingApp=!0,A().get(`/translator/getLocale/${e}`).then((t=>{j.state.initializingApp=!1,I.setLocaleMessage(e,t.data),I.locale=e}))}var O={data(){return{languages:[],activeLang:"English",activeFlag:"en",dialog:!1,languageMenu:!1}},created(){this.getLanguageList(),ie.$on("getLanguageList",(()=>{this.getLanguageList()}))},methods:{handleMenuItemClick(e){S(e.locale),localStorage.setItem("activeLang",e.language),localStorage.setItem("activeFlag",e.flag),localStorage.setItem("activeLocale",e.locale),this.activeLang=e.language,this.activeFlag=e.flag},getLanguageList(){A().get("/translator/getTranslatedLanguages").then((e=>{this.languages=e.data,this.languages.sort(((e,t)=>e.language<t.language?-1:e.language>t.language?1:0));const t=localStorage.getItem("activeLocale")||this.$i18n.locale||"en",n=this.languages.find((e=>e.locale===t));this.$i18n.locale=n.locale,this.activeLang=n.language,S(n.locale||"en")}))}}},x=O,G=n(1001),F=(0,G.Z)(x,_,C,!1,null,null,null),N=F.exports,V={data(){return{locale:"en",locales:[{text:"English",value:"en"},{text:"French",value:"fr"}]}},computed:{dhisLink(){return!!this.$store.state.dhis.user.orgId&&window.location.protocol+"//"+window.location.hostname}},watch:{locale(e){this.$i18n.locale=e}},components:{LanguageSwitcher:N}},E=V,R=(0,G.Z)(E,g,p,!1,null,null,null),M=R.exports,T={components:{IhrisHeader:M},created(){let e=location.search;e=e.substring(1),e=e.split("=");const t=e.findIndex((e=>"baseURL"===e));-1!==t&&(this.$store.state.coreURL=e[t+1])}},U=T,B=(0,G.Z)(U,c,l,!1,null,null,null),W=B.exports,D=n(8345);o.ZP.use(D.ZP);const q=[{path:"/",name:"home",component:()=>n.e(443).then(n.bind(n,1743))},{path:"/review/:locale",name:"review",component:()=>n.e(443).then(n.bind(n,5748))}],Y=new D.ZP({routes:q});var $=Y,z=n(4671),J=n(6123),X=n.n(J),H=n(3431),Q=n.n(H),K=n(1705);o.ZP.use(K.Z);var ee=new K.Z({}),te=(n(7147),n(9887)),ne=n.n(te);n(7658),n(1703);const oe=n(9887),ae={_code_cache:{},_code_loading:{},_setCache:(e,t)=>(ae._code_cache[e]=t,ae._code_loading[e]=!1,t),checkConstraints:(e,t,n,o,a)=>(console.log(e),new Promise(((r,s)=>{const i=e.split(","),c=[];for(const e of i)if(t[e]){const r=oe.evaluate(n,t[e].expression);if(e.startsWith("ihris-search")){const n=r.shift(),s=["_elements=id"];while(r.length)s.push(r.shift()+"="+encodeURI(r.shift()));c.push(new Promise(((r,i)=>{fetch("/fhir/"+n+"?"+s.join("&")).then((n=>{if(200!==n.status)return i(n.status);n.json().then((n=>{if(0===n.total)r(!0);else if(a){const s=oe.evaluate(n.entry,"resource.id");s.includes(a)?r(!0):(o.push(t[e].human),r(!1))}else o.push(t[e].human),r(!1)})).catch((e=>{i(e)}))})).catch((e=>{i(e)}))})))}else r.every(Boolean)?c.push(!0):(o.push(t[e].human),c.push(!1))}Promise.all(c).then((e=>{e.every(Boolean)?r(!0):r(!1)})).catch((e=>{s(e)}))}))),lookup:(e,t)=>e?t?ae.codeLookup(t,e):e.system&&e.code?ae.codeLookup(e.system,e.code):e.reference?ae.resourceLookup(e.reference):/([A-Z]\w*)\/([A-Za-z0-9\-.]{1,64})/.test(e)?ae.resourceLookup(e):new Promise((t=>t(e))):new Promise((t=>t(e))),resourceLookup:e=>new Promise((t=>{const n=e;ae._code_loading[n]?setTimeout((()=>{t(ae.resourceLookup(e))}),200):ae._code_cache[n]?t(ae._code_cache[n]):(ae._code_loading[n]=!0,fetch("/fhir/$short-name?reference="+e).then((o=>{200===o.status?o.json().then((o=>{o.display?t(ae._setCache(n,o.display)):(console.log("No display data from reference found ",n,o),t(ae._setCache(n,e)))})).catch((o=>{console.log(o),t(ae._setCache(n,e))})):(console.log("Invalid status from reference $short-name for ",n),t(ae._setCache(n,e)))})).catch((o=>{console.log(o),t(ae._setCache(n,e))})))})),codeLookup:(e,t,n)=>new Promise((o=>{const a=e+"#"+t;ae._code_loading[a]?setTimeout((()=>{o(ae.codeLookup(e,t,n))}),200):ae._code_cache[a]?o(ae._code_cache[a]):(ae._code_loading[a]=!0,fetch("/fhir/$short-name?system="+e+"&code="+t+"&valuset="+n).then((e=>{200===e.status?e.json().then((e=>{e.display?o(ae._setCache(a,e.display)):(console.log("No display data from codesystem found ",a,e),o(ae._setCache(a,t)))})).catch((e=>{console.log(e),o(ae._setCache(a,t))})):(console.log("Invalid status from codesystem $short-name for ",a),o(ae._setCache(a,t)))})).catch((e=>{console.log(e),o(ae._setCache(a,t))})))})),pathFieldExpression:e=>{const t=e.substring(e.indexOf(":")+1);return t.includes("-")||t.includes(".")?"`"+t+"`":t},expand:e=>{const t=(e,t)=>e.display===t.display?e.code===t.code?0:e.code<t.code?-1:1:e.display<t.display?-1:1,n=(e,t)=>{if(e.compose.include)for(const n of e.compose.include)if(n.concept)for(const e of n.concept)e.system=n.system,t.push(e)};return new Promise(((o,a)=>{const r=e.lastIndexOf("/"),s=e.lastIndexOf("|"),i=e.slice(r+1,-1!==s?s:e.length);let c=[];fetch("/fhir/ValueSet/"+i+"/$expand").then((e=>{e.ok?e.json().then((e=>{try{e.expansion&&0!==e.expansion.total||!e.compose.include?c=e.expansion.contains:n(e,c),c.sort(t),o(c)}catch(r){console.log(r),a(new Error("Invalid response from server."))}})).catch((e=>{a(e)})):fetch("/fhir/ValueSet/"+i).then((e=>{e.ok?e.json().then((e=>{n(e,c),c.sort(t),o(c)})).catch((e=>{a(e)})):a(new Error("Invalid response from server."))})).catch((e=>{a(e)}))})).catch((e=>{a(e)}))}))}};var re=ae;const se=n(4230);o.ZP.config.productionTip=!1,Object.defineProperty(o.ZP.prototype,"$fhirpath",{value:ne()}),Object.defineProperty(o.ZP.prototype,"$fhirutils",{value:re});const ie=new o.ZP;o.ZP.use(Q(),{eventEmitter:ie,store:j,idleTime:9e5,startAtIdle:!1}),fetch("/config/getGeneralConfig?defaultGenerConfig={}").then((e=>{e.json().then((e=>{let t=e.generalConfig;if(t||(t={}),j.state.config.generalConfig=t,j.state.idp=e.otherConfig.idp,"keycloak"===j.state.idp){const t={realm:e.otherConfig.keycloak.realm,clientId:e.otherConfig.keycloak.UIClientId,url:e.otherConfig.keycloak.baseURL,onLoad:"login-required"},n=z(t),a={install(e){e.$keycloak=n}};a.install=e=>{e.$keycloak=n,Object.defineProperties(e.prototype,{$keycloak:{get(){return n}}})},o.ZP.use(a),n.init({onLoad:t.onLoad}).then((e=>{e?(window.fetch=se(fetch,{headers:{Authorization:`Bearer ${n.token}`}}),n.loadUserInfo().then((e=>{const t={resourceType:"Person",id:e.sub,meta:{profile:["http://gofr.org/fhir/StructureDefinition/gofr-person-user"]},name:[{use:"official",text:e.name}],active:!0};e.email&&(t.telecom=[{system:"email",value:e.email}]),fetch("/auth",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)}).then((t=>{t.json().then((t=>{X().set("userObj",JSON.stringify(t),"infinity"),j.state.auth.userObj=t,j.state.auth.userID=e.sub,j.state.auth.username=e.preferred_username,new o.ZP({router:$,store:j,i18n:I,vuetify:ee,render:e=>e(W)}).$mount("#app")}))})).catch((e=>{console.error(e)}))})),setInterval((()=>{n.updateToken(70)}),6e4)):window.location.reload()})).catch((()=>{alert("Keycloak access failed")}))}else fetch("/auth",{headers:{"Content-Type":"application/json"},method:"GET"}).then((e=>{e.json().then((e=>{if(e.userObj&&e.userObj.resource){const t=e.userObj.resource.telecom.find((e=>"email"===e.system));t&&(j.state.auth.username=t.value),j.state.public_access=!1,j.state.auth.userObj=e.userObj,j.state.auth.userID=e.userObj.resource.id}}))})),o.ZP.prototype.$keycloak=null,new o.ZP({router:$,store:j,i18n:I,vuetify:ee,render:e=>e(W)}).$mount("#app")}))}))},8445:function(e,t,n){e.exports=n.p+"img/GOFR_RGB_high-res.49f11517.png"},7388:function(e){e.exports="data:image/png;base64,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"}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=e,function(){n.amdO={}}(),function(){var e=[];n.O=function(t,o,a,r){if(!o){var s=1/0;for(u=0;u<e.length;u++){o=e[u][0],a=e[u][1],r=e[u][2];for(var i=!0,c=0;c<o.length;c++)(!1&r||s>=r)&&Object.keys(n.O).every((function(e){return n.O[e](o[c])}))?o.splice(c--,1):(i=!1,r<s&&(s=r));if(i){e.splice(u--,1);var l=a();void 0!==l&&(t=l)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[o,a,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,o){return n.f[o](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/about.3911fe89.js"}}(),function(){n.miniCssF=function(e){return"css/about.c0fd108e.css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="gofr-translator:";n.l=function(o,a,r,s){if(e[o])e[o].push(a);else{var i,c;if(void 0!==r)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var h=l[u];if(h.getAttribute("src")==o||h.getAttribute("data-webpack")==t+r){i=h;break}}i||(c=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,n.nc&&i.setAttribute("nonce",n.nc),i.setAttribute("data-webpack",t+r),i.src=o),e[o]=[a];var d=function(t,n){i.onerror=i.onload=null,clearTimeout(f);var a=e[o];if(delete e[o],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((function(e){return e(n)})),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=d.bind(null,i.onerror),i.onload=d.bind(null,i.onload),c&&document.head.appendChild(i)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.p="/gofrapp/translator/"}(),function(){var e=function(e,t,n,o){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css";var r=function(r){if(a.onerror=a.onload=null,"load"===r.type)n();else{var s=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=s,c.request=i,a.parentNode.removeChild(a),o(c)}};return a.onerror=a.onload=r,a.href=t,document.head.appendChild(a),a},t=function(e,t){for(var n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var a=n[o],r=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(r===e||r===t))return a}var s=document.getElementsByTagName("style");for(o=0;o<s.length;o++){a=s[o],r=a.getAttribute("data-href");if(r===e||r===t)return a}},o=function(o){return new Promise((function(a,r){var s=n.miniCssF(o),i=n.p+s;if(t(s,i))return a();e(o,i,a,r)}))},a={143:0};n.f.miniCss=function(e,t){var n={443:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=o(e).then((function(){a[e]=0}),(function(t){throw delete a[e],t})))}}(),function(){var e={143:0};n.f.j=function(t,o){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)o.push(a[2]);else{var r=new Promise((function(n,o){a=e[t]=[n,o]}));o.push(a[2]=r);var s=n.p+n.u(t),i=new Error,c=function(o){if(n.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var r=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.src;i.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",i.name="ChunkLoadError",i.type=r,i.request=s,a[1](i)}};n.l(s,c,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,r,s=o[0],i=o[1],c=o[2],l=0;if(s.some((function(t){return 0!==e[t]}))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(c)var u=c(n)}for(t&&t(o);l<s.length;l++)r=s[l],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(u)},o=self["webpackChunkgofr_translator"]=self["webpackChunkgofr_translator"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(7155)}));o=n.O(o)})();
//# sourceMappingURL=app.795da5d6.js.map